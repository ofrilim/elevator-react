(this["webpackJsonpelevator-react"]=this["webpackJsonpelevator-react"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(6),i=n.n(o),c=(n(15),n(4)),l=n(2),u=n(3),s=n(7),d=n(8),f=n(10),m=n(9);function b(e){return Array.from(Array(e).keys()).map((function(e){return{number:e,condition:"call"}}))}function v(e){return Array.from(Array(e).keys()).map((function(e){return{id:e,isOccupied:!1,isDoorOpen:!1,inFloor:0,position:0}}))}var j,O=n.p+"static/media/elevator_sound.6347182a.mp3";function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function g(e,t){var n=e.title,a=e.titleId,o=p(e,["title","titleId"]);return r.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:"20.000000pt",height:"40.000000pt",viewBox:"0 0 50.000000 50.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":a},o),n?r.createElement("title",{id:a},n):null,j||(j=r.createElement("g",{transform:"translate(0.000000,50.000000) scale(0.100000,-0.100000)",fill:"current",stroke:"none"},r.createElement("path",{d:"M0 200 l0 -200 250 0 250 0 0 200 0 200 -250 0 -250 0 0 -200z m475 0 l0 -175 -225 0 -225 0 -3 165 c-1 90 0 170 3 177 3 11 51 13 227 11 l223 -3 0 -175z"}),r.createElement("path",{d:"M74 345 c-4 -8 -4 -26 -2 -40 3 -14 -1 -30 -8 -36 -16 -13 -20 -139 -4 -139 6 0 10 -20 10 -45 l0 -45 40 0 40 0 0 45 c0 25 5 45 10 45 14 0 13 123 -2 138 -6 6 -12 29 -12 49 -1 35 -3 38 -34 41 -22 2 -34 -2 -38 -13z"}),r.createElement("path",{d:"M214 345 c-4 -8 -4 -26 -2 -40 3 -14 -1 -30 -8 -36 -16 -13 -20 -139 -4 -139 6 0 10 -20 10 -45 l0 -45 40 0 40 0 0 45 c0 25 5 45 10 45 14 0 13 123 -2 138 -6 6 -12 29 -12 49 -1 35 -3 38 -34 41 -22 2 -34 -2 -38 -13z"}),r.createElement("path",{d:"M354 345 c-4 -8 -4 -26 -2 -40 3 -14 -1 -30 -8 -36 -16 -13 -20 -139 -4 -139 6 0 10 -20 10 -45 l0 -45 40 0 40 0 0 45 c0 25 5 45 10 45 14 0 13 123 -2 138 -6 6 -12 29 -12 49 -1 35 -3 38 -34 41 -22 2 -34 -2 -38 -13z"}))))}var x=r.forwardRef(g),y=(n.p,n(0)),I="#ed484d",S="#5bcd88",E="#000000",F=function(e){return Object(y.jsx)("div",{className:"elevator",style:{top:e.elevator.position},children:Object(y.jsx)(x,{fill:e.elevator.isDoorOpen?S:e.elevator.isOccupied?I:E})})},C=function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("button",{className:"capitalize border-radius bold ".concat(e.condition),onClick:e.handleClick,children:e.condition})})},k=function(e){return Object(y.jsxs)("div",{className:"Floor flex align-center justify-center",children:[Object(y.jsx)("h5",{className:"capitalize",children:function(){var t=e.floor.number;switch(t){case 0:return"ground floor";case 1:return"".concat(t,"st");case 2:return"".concat(t,"nd");case 3:return"".concat(t,"rd");default:return"".concat(t,"th")}}()}),Object(y.jsx)("div",{className:"cells-container flex",children:e.elevators.map((function(t,n){return 0===e.floor.number?Object(y.jsx)("div",{className:"cell",children:Object(y.jsx)(F,{elevator:t})},n):Object(y.jsx)("div",{className:"cell"},n)}))}),Object(y.jsx)(C,{handleClick:function(){e.handleClick(e.floor)},condition:e.floor.condition}),Object(y.jsx)("audio",{className:"audio-element",children:Object(y.jsx)("source",{src:O})}),"arrived"===e.floor.condition&&void document.getElementsByClassName("audio-element")[0].play()]})},w=function(e){var t=function(t){var n=t.target,r=n.name,a=n.value;a<1||e.handleChange(r,a)};return Object(y.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.handleSubmit()},children:[Object(y.jsxs)("label",{className:"capitalize",htmlFor:"numOfFloors",children:["floors:",Object(y.jsx)("input",{type:"number",name:"numOfFloors",id:"numOfFloors",value:e.buildingState.numOfFloors,onChange:t})]}),Object(y.jsxs)("label",{className:"capitalize",htmlFor:"numOfElevators",children:["elevators:",Object(y.jsx)("input",{type:"number",name:"numOfElevators",id:"numOfElevators",value:e.buildingState.numOfElevators,onChange:t})]}),Object(y.jsx)("button",{type:"submit",children:"Update"})]})},B=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).updateData=function(t,n){var r=function(e,t){return{floorsInBuilding:b(e),elevators:v(t)}}(t,n),a=r.floorsInBuilding,o=r.elevators;e.state.rafIds.forEach((function(e){cancelAnimationFrame(e)})),e.setState((function(){return{floorsInBuilding:a,elevators:o,queue:[],rafIds:Array.from(Array(n).keys())}}))},e.handleSubmit=function(){e.updateData(e.state.numOfFloors,e.state.numOfElevators)},e.handleChange=function(t,n){e.setState((function(){return Object(u.a)({},t,+n)}))},e.handleClick=function(t){var n=t.number;"call"===t.condition&&e.setState((function(e){return{floorsInBuilding:e.floorsInBuilding.map((function(e){return e.number===n?Object(l.a)(Object(l.a)({},e),{},{condition:"waiting"}):e})),queue:[].concat(Object(c.a)(e.queue),[n])}}),(function(){e.handleRequest()}))},e.handleRequest=function(){var t=e.state.queue;if(0!==t.length){var n=t[0],r=e.findAvailableElevator(n);if(-1!==r){var a=Object(c.a)(t);a.shift(),e.setState((function(){return{queue:a}}),(function(){e.moveElevator(r,n)}))}}},e.findAvailableElevator=function(t){return e.state.elevators.filter((function(e){return!e.isOccupied})).reduce((function(e,n){var r=Math.abs(t-n.inFloor);return r<e.diff&&(e.diff=r,e.elevatorId=n.id),e}),{diff:1e9,elevatorId:-1}).elevatorId},e.moveElevator=function(t,n){var r=e.state.elevators.find((function(e){return e.id===t}));e.setState((function(e){return{elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{isOccupied:!0}):e}))}}));var a,o,i=-56*n,c=r.position,u=i<c,s=Date.now();!function r(){var d=Date.now()-s;if(o=u?c-d/25:c+d/25,e.setState((function(e){return{elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{position:o}):e}))}})),u?o<=i:o>=i)return e.setState((function(e){return{elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{position:i,inFloor:n,isDoorOpen:!0}):e}))}})),e.setState((function(e){return{floorsInBuilding:e.floorsInBuilding.map((function(e){return e.number===n?Object(l.a)(Object(l.a)({},e),{},{condition:"arrived"}):e}))}})),void setTimeout((function(){e.setState((function(e){return{floorsInBuilding:e.floorsInBuilding.map((function(e){return e.number===n?Object(l.a)(Object(l.a)({},e),{},{condition:"call"}):e})),elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{isDoorOpen:!1,isOccupied:!1}):e}))}})),e.handleRequest()}),2e3);a=requestAnimationFrame(r),e.updateRafIdsState(t,a)}()},e.updateRafIdsState=function(t,n){var r=Object(c.a)(e.state.rafIds);r[t]=n,e.setState((function(){return{rafIds:r}}))},e.state={numOfFloors:10,numOfElevators:5,floorsInBuilding:[],elevators:[],queue:[],rafIds:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateData(this.state.numOfFloors,this.state.numOfElevators)}},{key:"render",value:function(){var e=this;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w,{buildingState:this.state,handleChange:this.handleChange,handleSubmit:this.handleSubmit}),Object(y.jsx)("div",{className:"building bold",children:e.state.floorsInBuilding.map((function(t){return Object(y.jsx)(k,{floor:t,elevators:e.state.elevators,handleClick:e.handleClick},t.number)}))})]})}}]),n}(r.Component),N=function(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("header",{className:"App-header center bold capitalize",children:Object(y.jsx)("h1",{children:"elevator exercise"})}),Object(y.jsx)(B,{})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(N,{})}),document.getElementById("root")),A()}},[[17,1,2]]]);
//# sourceMappingURL=main.d1b9d74c.chunk.js.map