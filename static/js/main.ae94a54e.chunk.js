(this["webpackJsonpelevator-react"]=this["webpackJsonpelevator-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r,a=n(1),i=n.n(a),o=n(5),c=n.n(o),l=(n(14),n(2)),s=n(3),u=n(6),d=n(7),f=n(9),m=n(8),v=n.p+"static/media/elevator_sound.6347182a.mp3";function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function O(e,t){var n=e.title,i=e.titleId,o=j(e,["title","titleId"]);return a.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:"20.000000pt",height:"40.000000pt",viewBox:"0 0 50.000000 50.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":i},o),n?a.createElement("title",{id:i},n):null,r||(r=a.createElement("g",{transform:"translate(0.000000,50.000000) scale(0.100000,-0.100000)",fill:"current",stroke:"none"},a.createElement("path",{d:"M0 200 l0 -200 250 0 250 0 0 200 0 200 -250 0 -250 0 0 -200z m475 0 l0 -175 -225 0 -225 0 -3 165 c-1 90 0 170 3 177 3 11 51 13 227 11 l223 -3 0 -175z"}),a.createElement("path",{d:"M74 345 c-4 -8 -4 -26 -2 -40 3 -14 -1 -30 -8 -36 -16 -13 -20 -139 -4 -139 6 0 10 -20 10 -45 l0 -45 40 0 40 0 0 45 c0 25 5 45 10 45 14 0 13 123 -2 138 -6 6 -12 29 -12 49 -1 35 -3 38 -34 41 -22 2 -34 -2 -38 -13z"}),a.createElement("path",{d:"M214 345 c-4 -8 -4 -26 -2 -40 3 -14 -1 -30 -8 -36 -16 -13 -20 -139 -4 -139 6 0 10 -20 10 -45 l0 -45 40 0 40 0 0 45 c0 25 5 45 10 45 14 0 13 123 -2 138 -6 6 -12 29 -12 49 -1 35 -3 38 -34 41 -22 2 -34 -2 -38 -13z"}),a.createElement("path",{d:"M354 345 c-4 -8 -4 -26 -2 -40 3 -14 -1 -30 -8 -36 -16 -13 -20 -139 -4 -139 6 0 10 -20 10 -45 l0 -45 40 0 40 0 0 45 c0 25 5 45 10 45 14 0 13 123 -2 138 -6 6 -12 29 -12 49 -1 35 -3 38 -34 41 -22 2 -34 -2 -38 -13z"}))))}var p=a.forwardRef(O),h=(n.p,n(0)),g="#ed484d",x="#5bcd88",y="#000000",E=function(e){return Object(h.jsx)("div",{className:"elevator",style:{top:e.elevator.position},children:Object(h.jsx)(p,{fill:e.elevator.isDoorOpen?x:e.elevator.isOccupied?g:y})})};function I(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("button",{className:"capitalize border-radius bold ".concat(e.condition),onClick:e.handleClick,children:e.condition})})}var C=function(e){return Object(h.jsxs)("div",{className:"Floor flex align-center justify-center",children:[Object(h.jsx)("h5",{className:"capitalize",children:function(){var t=e.floor.number;switch(t){case 0:return"ground floor";case 1:return"".concat(t,"st");case 2:return"".concat(t,"nd");case 3:return"".concat(t,"rd");default:return"".concat(t,"th")}}()}),Object(h.jsx)("div",{className:"grid-container",children:e.elevators.map((function(t,n){return 0===e.floor.number?Object(h.jsx)("div",{className:"cell",children:Object(h.jsx)(E,{elevator:t})},n):Object(h.jsx)("div",{className:"cell"},n)}))}),Object(h.jsx)(I,{handleClick:function(){e.handleClick(e.floor)},condition:e.floor.condition}),Object(h.jsx)("audio",{className:"audio-element",children:Object(h.jsx)("source",{src:v})}),"arrived"===e.floor.condition?void document.getElementsByClassName("audio-element")[0].play():""]})};function F(e){return Array.from(Array(e).keys()).map((function(e){return{number:e,condition:"call"}}))}function k(e){return Array.from(Array(e).keys()).map((function(e){return{id:e,isOccupied:!1,isDoorOpen:!1,inFloor:0,position:0}}))}var w=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).updateData=function(t,n){var r=function(e,t){return{floorsInBuilding:F(e),elevators:k(t)}}(t,n),a=r.floorsInBuilding,i=r.elevators;e.setState({floorsInBuilding:a,elevators:i})},e.handleSubmit=function(){e.updateData(e.state.numOfFloors,e.state.numOfElevators)},e.handleChange=function(t){var n=t.target.name;e.setState((function(){return Object(s.a)({},n,+t.target.value)}))},e.handleClick=function(t){var n=t.number;if("call"===t.condition){e.setState((function(e){return{floorsInBuilding:e.floorsInBuilding.map((function(e){return e.number===n?Object(l.a)(Object(l.a)({},e),{},{condition:"waiting"}):e}))}}));var r=e.findAvailableElevator(n);-1!==r&&e.moveElevator(r,n)}},e.findAvailableElevator=function(t){return e.state.elevators.filter((function(e){return!e.isOccupied})).reduce((function(e,n){var r=Math.abs(t-n.inFloor);return r<e.diff&&(e.diff=r,e.elevatorId=n.id),e}),{diff:1e9,elevatorId:-1}).elevatorId},e.moveElevator=function(t,n){var r=e.state.elevators.find((function(e){return e.id===t}));e.setState((function(e){return{elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{isOccupied:!0}):e}))}}));var a,i,o=-56*n,c=r.position,s=o<c,u=Date.now();!function r(){var d=Date.now()-u;if(i=s?c-d/20:c+d/20,e.setState((function(e){return{elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{position:i}):e}))}})),s?i<=o:i>=o)return e.setState((function(e){return{elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{position:o,inFloor:n,isDoorOpen:!0}):e}))}})),e.setState((function(e){return{floorsInBuilding:e.floorsInBuilding.map((function(e){return e.number===n?Object(l.a)(Object(l.a)({},e),{},{condition:"arrived"}):e}))}})),setTimeout((function(){e.setState((function(e){return{floorsInBuilding:e.floorsInBuilding.map((function(e){return e.number===n?Object(l.a)(Object(l.a)({},e),{},{condition:"call"}):e}))}})),e.setState((function(e){return{elevators:e.elevators.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{isDoorOpen:!1,isOccupied:!1}):e}))}}))}),2e3),void cancelAnimationFrame(a);a=requestAnimationFrame(r)}()},e.state={numOfFloors:10,numOfElevators:5,floorsInBuilding:[],elevators:[]},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateData(this.state.numOfFloors,this.state.numOfElevators)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"form",children:[Object(h.jsxs)("label",{className:"capitalize",children:["floors:",Object(h.jsx)("input",{type:"number",name:"numOfFloors",value:this.state.numOfFloors,onChange:this.handleChange})]}),Object(h.jsxs)("label",{className:"capitalize",children:["elevators:",Object(h.jsx)("input",{type:"number",name:"numOfElevators",value:this.state.numOfElevators,onChange:this.handleChange})]}),Object(h.jsx)("button",{type:"submit",onClick:this.handleSubmit,children:"Update"})]}),Object(h.jsx)("div",{className:"building bold",children:this.state.floorsInBuilding.map((function(t){return Object(h.jsx)(C,{floor:t,elevators:e.state.elevators,handleClick:e.handleClick},t.number)}))})]})}}]),n}(a.Component),B=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{className:"App-header center bold capitalize",children:Object(h.jsx)("h1",{children:"elevator exercise"})}),Object(h.jsx)(w,{})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};c.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(B,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.ae94a54e.chunk.js.map